<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summary - Cacti Automation</title>
    <style>
        :root { --bg: #121212; --card: rgba(22,22,26,0.9); --text: #f0f0f0; --accent: #4d84ff; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #1a1a2e, #16213e); min-height: 100vh; color: var(--text); padding: 2rem; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 2rem; color: var(--accent); }
        .card { background: var(--card); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 0.8rem; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { color: var(--accent); }
        .back-btn { display: inline-block; padding: 0.8rem 1.5rem; background: var(--accent); color: white; text-decoration: none; border-radius: 8px; margin-bottom: 1rem; }
        .empty { text-align: center; color: #888; padding: 2rem; }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-btn">&larr; Back to Dashboard</a>
        <h1>ðŸ“Š Pipeline Summary</h1>
        
        {% if runs and runs|length > 0 %}
        <div class="card">
            <h3>Recent Runs</h3>
            <table>
                <tr><th>Run ID</th><th>Status</th><th>Items</th><th>Success</th><th>Failed</th></tr>
                {% for run in runs %}
                <tr>
                    <td>{{ run.run_id or 'N/A' }}</td>
                    <td>{{ run.status or 'N/A' }}</td>
                    <td>{{ run.total_items or 0 }}</td>
                    <td style="color:#2ecc71">{{ run.success_count or 0 }}</td>
                    <td style="color:#e74c3c">{{ run.fail_count or 0 }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        {% else %}
        <div class="card empty">
            <p>No pipeline runs yet. Run the pipeline from the dashboard first.</p>
        </div>
        {% endif %}
        
        {% if summary %}
        <div class="card">
            <h3>Latest Summary</h3>
            <table>
                <tr><td>Raw Images</td><td>{{ summary.raw_images_scraped or 0 }}</td></tr>
                <tr><td>OCR Processed</td><td>{{ summary.ocr_items_processed or 0 }}</td></tr>
                <tr><td>CSV Rows</td><td>{{ summary.cleaned_csv_rows or 0 }}</td></tr>
            </table>
        </div>
        {% endif %}
        
        {% if logs and logs|length > 0 %}
        <div class="card">
            <h3>Logs</h3>
            <pre style="max-height:300px; overflow:auto; font-size:0.85rem; color:#aaa;">{% for log in logs %}{{ log }}
{% endfor %}</pre>
        </div>
        {% endif %}
    </div>
</body>
</html>
